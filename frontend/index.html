<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shear 公共剪贴板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: { display: ["Noto Sans SC", "ui-sans-serif", "system-ui", "-apple-system"] },
            keyframes: {
              modalScale: {
                "0%": { transform: "scale(0.85)", opacity: "0" },
                "60%": { transform: "scale(1.06)", opacity: "1" },
                "80%": { transform: "scale(1.02)" },
                "100%": { transform: "scale(1)" },
              },
            },
            animation: {
              modalScale: "modalScale 320ms cubic-bezier(.34,1.56,.64,1)",
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.cn" />
    <link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
    <link href="https://fonts.googleapis.cn/css2?family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/5.2.0/github-markdown.min.css" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/11.9.0/styles/github.min.css" />
    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.9/katex.min.css" />
  </head>
  <body class="bg-neutral-50 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 min-h-screen font-sans">
    <style>
      .markdown-body {
        color: #111827;
        background-color: transparent;
      }
      .dark .markdown-body { color: #e5e7eb; }
      .markdown-body a { color: #1d4ed8; }
      .markdown-body code, .markdown-body pre { background-color: #f3f4f6; color: #111827; }
      .dark .markdown-body code, .dark .markdown-body pre { background-color: #111827; color: #e5e7eb; }
      .markdown-body hr { border-color: #e5e7eb; }
    </style>
    <div id="toast" class="fixed top-6 inset-x-0 flex justify-center z-[100] pointer-events-none">
      <div id="toastInner" class="hidden px-4 py-2 rounded-lg bg-green-600 text-white shadow-lg transition-all duration-300 ease-out opacity-0 -translate-y-2">
        <span id="toastMsg">复制成功</span>
      </div>
    </div>
    <div class="fixed top-4 right-4 flex items-center gap-2">
      <div class="relative">
        <button id="themeToggle" class="inline-flex items-center gap-2 px-3 py-2 rounded-md border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition">
          <svg id="iconSun" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100"><path d="M12 4V2M12 22v-2M4 12H2m20 0h-2M5.64 5.64 4.22 4.22m15.56 15.56-1.42-1.42M18.36 5.64l1.42-1.42M5.64 18.36 4.22 19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>
          <svg id="iconMoon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100 hidden"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <svg id="iconSystem" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100 hidden"><path d="M3 4h18v12H3zM8 20h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <div id="themeMenu" class="absolute right-0 mt-2 hidden w-40 rounded-md border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 shadow-lg">
          <button id="themeLight" class="w-full flex items-center gap-2 px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-sm">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100"><path d="M12 4V2M12 22v-2M4 12H2m20 0h-2M5.64 5.64 4.22 4.22m15.56 15.56-1.42-1.42M18.36 5.64l1.42-1.42M5.64 18.36 4.22 19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>
            <span>浅色</span>
          </button>
          <button id="themeDark" class="w-full flex items-center gap-2 px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-sm">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span>深色</span>
          </button>
          <button id="themeSystem" class="w-full flex items-center gap-2 px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-sm">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100"><path d="M3 4h18v12H3zM8 20h8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span>跟随系统</span>
          </button>
        </div>
      </div>
    </div>

    <main class="container mx-auto px-6 pt-24">
      <h1 class="font-display text-6xl sm:text-7xl font-extrabold tracking-[0.02em] bg-gradient-to-r from-blue-500 via-indigo-600 to-blue-800 bg-clip-text text-transparent select-none text-center">
        Shear
      </h1>
      <p class="mt-4 text-center text-neutral-600 dark:text-neutral-400">Markdown 公共剪贴板</p>

      <div class="mt-20 flex flex-col sm:flex-row items-center justify-center gap-4">
        <button id="openCreate" class="w-full sm:w-auto inline-flex items-center justify-center gap-2 px-5 py-3 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-neutral-900 hover:opacity-90 transition">
          <span>+ 创建剪贴</span>
        </button>
        <button id="openView" class="w-full sm:w-auto inline-flex items-center justify-center gap-2 px-5 py-3 rounded-md border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-neutral-900 dark:text-neutral-100">
            <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7Zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>打开剪贴</span>
        </button>
      </div>
    </main>

    <div id="createModal" class="fixed inset-0 hidden items-center justify-center bg-black/40 backdrop-blur-sm sm:p-4 p-0 z-50">
      <div class="w-full sm:max-w-3xl bg-white dark:bg-neutral-900 rounded-none sm:rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 animate-modalScale h-screen sm:h-auto">
        <div class="p-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between">
          <div class="text-lg font-semibold">新建剪贴</div>
          <button id="closeCreate" class="px-3 py-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800">关闭</button>
        </div>
        <div class="p-4 max-h-[75vh] overflow-y-auto">
          <label class="text-sm text-neutral-500 dark:text-neutral-400 mb-2 block">内容</label>
          <textarea id="mdInput" class="flex min-h-[320px] w-full rounded-lg border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-950 px-3 py-2 text-sm placeholder:text-neutral-400 dark:placeholder:text-neutral-500 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-neutral-950"></textarea>
        </div>
        <div class="p-4 flex justify-end">
          <button id="saveBtn" class="inline-flex items-center px-5 py-2.5 rounded-md bg-purple-600 text-white hover:bg-purple-700">保存</button>
        </div>
      </div>
    </div>

    <div id="hashDialog" class="fixed inset-0 hidden items-center justify-center bg-black/40 backdrop-blur-sm sm:p-4 p-0 z-50">
      <div class="w-full sm:max-w-lg bg-white dark:bg-neutral-900 rounded-none sm:rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 animate-modalScale h-screen sm:h-auto">
        <div class="p-4 border-b border-neutral-200 dark:border-neutral-800 text-lg font-semibold">内容已保存</div>
        <div class="p-4">
          <div class="text-sm text-neutral-500 dark:text-neutral-400 mb-2">内容标识 (SHA256)</div>
          <div id="hashValue" class="text-base break-all bg-neutral-50 dark:bg-neutral-950 p-3 rounded-md"></div>
        </div>
        <div class="p-4 flex justify-end gap-3">
          <button id="copyHash" class="px-4 py-2 rounded-md border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800">复制标识</button>
          <button id="confirmHash" class="px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-neutral-900">完成</button>
        </div>
      </div>
    </div>

    <div id="viewModal" class="fixed inset-0 hidden items-center justify-center bg-black/40 backdrop-blur-sm sm:p-4 p-0 z-50">
      <div class="w-full sm:max-w-5xl bg-white dark:bg-neutral-900 rounded-none sm:rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 animate-modalScale h-screen sm:h-auto">
        <div class="p-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between">
          <div class="text-lg font-semibold">打开剪贴</div>
          <button id="closeView" class="px-3 py-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800">关闭</button>
        </div>
        <div class="p-4 flex flex-col gap-3 sm:max-h-none sm:overflow-visible max-h-[85vh] overflow-y-auto">
          <div class="flex items-center gap-2">
            <input id="hashInput" class="flex-1 px-3 py-2 rounded-md border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-950" placeholder="输入 SHA256 Hash" />
            <button id="fetchBtn" class="px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-neutral-900">查询</button>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-sm">模式</span>
            <select id="viewMode" class="px-3 py-2 rounded-md border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-950">
              <option value="raw">纯文本</option>
              <option value="split">分屏</option>
              <option value="rendered">完全渲染</option>
            </select>
          </div>
          <div id="viewer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <pre id="viewerRaw" class="h-[340px] md:h-[420px] w-full bg-neutral-50 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 p-4 overflow-auto whitespace-pre-wrap rounded-lg"></pre>
            <div id="viewerRendered" class="h-[340px] md:h-[420px] w-full p-4 overflow-auto rounded-lg markdown-body bg-neutral-50 dark:bg-neutral-900"></div>
          </div>
          <div class="flex justify-end gap-3">
            <button id="copyRaw" class="px-4 py-2 rounded-md border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800">复制原文</button>
            <button id="closeViewer" class="px-4 py-2 rounded-md bg-neutral-900 text-white dark:bg-white dark:text-neutral-900">关闭</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.7/dist/purify.min.js"></script>
    <script src="https://cdn.staticfile.org/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.staticfile.org/KaTeX/0.16.9/katex.min.js"></script>
    <script src="https://cdn.staticfile.org/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
    <script src="./app.js"></script>
  </body>
  </html>